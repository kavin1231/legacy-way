Api (node) > frontend (React) > Deploy  > Devops

create pos system

firstly check node -v,npm -v

npm init

install dependencies

create index.js file

after that import the dependencies

initialize the app

import env

connect mogoose

backend create


check ng version for create frontend

ng new pos-system-client

ng serve

create frontend

buy servers

create aws account

create ec2

launch an instance

before connect to ec2 instance using ssh client ,I'm going to transfer pem file to windows to ubuntu using this scp C:\Users\kavin\Desktop\devops-api-key.pem linuxcode@192.xxx.x.xxx:/home/linuxcode/Desktop/DEVOPS/,

open terminal located in pem file & put this things 

chmod 400 "devops-api-key.pem"
ssh -i "devops-api-key.pem" ubuntu@ec2-xxxxxxx.compute-1.amazonaws.com

after that install nginx 
sudo apt update && sudo apt upgrade -y
sudo apt install nginx -y

after that

sudo systemctl enable nginx
sudo systemctl start nginx
sudo systemctl status nginx

after tha t in instances copy the address and put that into new tab and paste it ...still not working so 

we have to add some inbound outbound rules 
1. go to instances
2. security,security groups,edit inbound rules,then you can see only have default ssh connect rule,so we need to add new one
 *hhtp> 80 > anywhere ipv4 >server default

after that we need to create ilstic ip for ec2
  1. click ec2 > elastic ip > allocate elastic ip address > us-east-1 > Allocate click
  2. then click elastic ip > associate illastic ip address > give instance > private ip > Do not put tick for reassociation > Associate

after that you need to add new ssh connection to ubuntu and download dependencies.

  sudo apt update && sudo apt upgrade -y 
  sudo apt install nodejs
  node -v
  sudo apt install npm
  npm -v

install mongodb 24 
  curl -fsSL .....
  apt-key list
  echo ....
  sudo apt update
  sudo apt install mongodb.org
  mongod --version
  sudo systemctl enable mongod
  start / status 
  mongosh

after that add inbound rule for mongodb and system running port

1.custom tcp > 27017 > Anywhere can IPV4 > mongod server
2.custom tcp > 3000 > Anywhere can IPV4 > server port

git -v





if there is no any versions we need to install git 
after that we  can clone our github repositories in here 
     but if that is public we can without anyerrors clone,but if that was a private repository we cant directly clone.so we need to do some steps for that...
        steps
           *settings on github > developer settings > personal access tokens (classic) > generate new token > classic > token name add > exp 30 days > select scopes > repo, write:packages,delete:packages, admin:public_key,admin:repo_hook,project,admin:ssh_signing_key > generate token 
after that go to ubunntu again 
git clone https://kavin1231:ghp_KlnuFtESorixxxxxxxxxxxxxxxxxxxx@github.com/kavin1231/pos-system-devops.git

ls
cd pos-system-devops
ls
node index.js( not working )
sudo nano index.js
change mongodb url like this mongodb://localhost:27017/pos_system_devops

after that node index.js
its working


but if press ctrl + C in terminal http server not working on web

so we need to use pm2
   sudo npm install pm2 -g
   pm2 -v
   pm2 start index.js

project is online now...without terminal..



  
.......................................................................................

import an Certbot

buy a hostinger domain

search domain > buy now > 1 yr > complete payment 

go to DNS and select A name record and add ilastic ip address to points to ,and time to leave to 60  

again open terminal 

Certbot is a free tool that automatically provides and renews SSL certificates to enable HTTPS and secure your website.
after that install certbot
sudo apt install certbot python3-certbot-nginx -y

after that 
cd /etc  > cd nginx/ > ls > cd sites-available/ > ls > sudo nano default

server {
    listen 80;
    server_name devstack-devops.shop www.devstack-devops.shop;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name devstack-devops.shop www.devstack-devops.shop;

    ssl_certificate /etc/letsencrypt/live/devstack-devops.shop/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/devstack-devops.shop/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
 
        proxy_cache_bypass $http_upgrade;
    }
}


save and sudo nginx -t
sudo systemctl reload nginx
sudo apt install certbot python3-certbot-nginx -y

clear 
sudo certbot --nginx -d devstack-devops.shop -d www.devstack-devops.shop
give email and yes
sudo certbot renew --dry-run

sudo systemctl restart nginx and status

add https inbound rule for instance ec2
after that check those

curl http://localhost:3000/test
curl https://devstack-devops.shop/test

after that buy a shared domain server
then we need share web to shared web

how to access shared ..
using filezila client can share files to shared

firslty check on dashboard ssl certificate is active

create a new ftp account

run filezilla on ubuntu 

open envirenments in pos-system-client and copy the 3000 port paste it to in normal environment also

open filezilla and add website button 
after that you can see my sites > click new site add name and add other credentials
after that go to hostinger shared webhosting dashboard and click ftp account and get details
firslt add ftp ip > port 21 > add the full user > and password > ok > connect 

after that delete default.php 

after that go to ubuntu pos-system-client folder and open terminal
ng build
if there any errors like production errors

after that u need to text editor open in angular.json 
budget size change 

maximum warning errors 1mb,2mb save

ng build

again open the 2 environment in client and replace localhost 3000 with this https://devstack-devops.shop   > save

ng build again
next go to project you can see dist and browser after that copy the address and paste it in the filezilla localsite search option and paste the path to that,

after that ctrl+A right click upload 

................................................................................................deployment end

learn about git and github

Git

Git is a version control system.
It helps developers track changes in code, go back to previous versions, and work together safely.

What Git does:

Keeps history of all code changes

Allows multiple people to work on the same project

Helps fix mistakes by restoring older versions

Works locally on your computer

Common Git actions:

git init ‚Äì start Git in a project

git add ‚Äì stage changes

git commit ‚Äì save changes with a message

git branch ‚Äì create separate work versions

git merge ‚Äì combine branches

GitHub

GitHub is a cloud-based platform that hosts Git repositories online.

What GitHub does:

Stores your Git projects on the internet

Makes collaboration easy (teamwork)

Provides tools like pull requests, issues, reviews

Acts as a backup for your code

Git             vs              GitHub:
Git	                            GitHub
Tool/software                 	Online platform
Works locally                 	Works on the cloud
Manages code history	          Shares & collaborates

How Git and GitHub work together:

Write code on your computer
Git tracks the changes
Push code to GitHub
Others pull, review, or contribute

and git branching
main and developer branch


..........................................

create a ec2 instance again 
after that get a key pem file

open um ubuntu file and create a new folder on desktop

after that again transfer that pem file windows to ubuntu vm using there ip address like previously we did
check now

after that open the terminal and copy paste ssh client connect methods like previously did
example ..
chmod 400 "CI.pem"
ssh -i "CI.pem" ubuntu@ec2-xxxxxxx.compute-1.amazonaws.com

in that we need to put java project so we need to create a java simple testing project using spring initializr
  1.java,maven,default version, com.destack.ci,pipeline,jar,add dependencies like spring boot devtools and spring web

after that again transfer that zip file windows to ubuntu vm using there ip address like previously we did
unzip & open in intelij idea


after that go src > main > resources > application.properties and add > server.port=8081 
after that in main > java > com.devstack.ci.pipeline > right click > package > TestController >  package com.devstack.ci.pipeline.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api/v1/tests")
public class TestController {
    @GetMapping
    public String test() {
        return "Success!..";
    }
}

And then run PiplineApplication  & check http://localhost:8081/api/v1/tests

install java 17 and mvn ubuntu 24
sudo apt update
sudo apt install -y openjdk-17-jdk
java -version
sudo apt install -y maven
mvn -version

go to ec2 and create elastic ip
allocate ip > associate ip with ci instance 

after that install nginx for server manage
sudo apt update
sudo apt install -y nginx
sudo systemctl start nginx
sudo systemctl enable nginx
sudo systemctl status nginx

add inbound rules 
http,https,custom tcp ,8081(server)  save

now nginx displayed in web

now create a new organization
in github settings organization and choose free organization, addname , conntact email, personal account,dont add tick on get github copilot,add terms & conditions,  

go to intellig java project and on terminal
git init,
go to organization,create new repository in organization,add name,add description,create, and again in java project terminal
git add . 
git commit -m init
git remote add origin https://github.com/devstack-devops-6/pipeline.git
git branch -M main
git push -u origin main 
then add username & personal access token

now we are going to connect github and server

click on repository settings,actions,runners,New runner,new self hosted runner,linux ,64 ,and copy paste those things in ubuntu terminal ,press only enter when you face a error you need to get the correct one using chatgpt for enabling super user,

now runner works,but we need to consistently runner work so we need to add a code
run continuosly github action runner on ubuntu ./run.sh

cd ~/actions-runner
sudo ./svc.sh install
sudo ./svc.sh start
sudo ./svc.sh status

go to repository and in upper you can see actions , java with maven , 
like this 
name: Java CI with Maven

on:
  push:
    branches: [ "main" ]

jobs:
  build:
    runs-on: self-hosted

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven

      - name: Build with Maven
        run: mvn -B clean package

after we can see something wrong with maven.mvl file so we need to again do this 
sudo rm -r actions-runner/
create a runner again
and paste those things into terminal

and after that when you run that you need to put this cod not only sh
nohup ./run.sh &  (It can help continuously run)

now pipeline is already working.

now we need to add correct path to this like this 

name: Java CI with Maven

on:
  push:
    branches: [ "main" ]

jobs:
  build:
    runs-on: self-hosted

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven

      - name: Build with Maven
        run: sudo kill -9 sudo lsof -t -i:8081 & sudo java -jar /root/actions-runner/_work/pipeline/pipeline/target/pipeline-0.0.1-SNAPSHOT.jar &



then go to the java project in intellij and update the github repo

next go to your github repp and devide main branch into new samy branches
feet-1-amiru
feet-2-hasika


after that go back to java project intelig and you need to update again and select and checkout the new branch

add some edits in maven file on intelij like this 

name: Java CI with Maven

on:
  push:
    branches: [ "main" ]

jobs:
  build:
    runs-on: self-hosted

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven

      - name: Build with Maven
        run: sudo kill -9 sudo lsof -t -i:8081 & sudo java -jar /actions-runner/_work/pipeline/pipeline/target/pipeline-0.0.1-SNAPSHOT.jar &


and commit this into the branch

nohup java -jar pipline-0.0.1-SNAPSHOT.jar (RUN THIS ON UBUNTU TERMINAL)
like that we are creating CI pipeline using github actions...

....................................................................................................

Day 6

devops lifecycle 
devops = development + operation
CI = continuos intigration
CD = continuos delivery
plan > code > build > test > release > deploy > operate > monitor     again plan >....

agile methodology > build in small steps, get feedback, improve continuously, and adapt to change.
and this have iterative progress > devide into small peices.
agile scrum process use for continous process.
    project development method.
    now a days mostly using this for software development
    agile + devops
  1.product owner > define product vision / prioritize / goal is fast development & handover
  2.team > group of people
  3.Scrum Master > A Scrum Master is a facilitator and coach who helps a Scrum team follow Agile practices, removes obstacles, and ensures smooth, productive delivery of work. like a supervisor.
     his goal is manage the effeciency inside of scrum framework
  4.Product > software
  5.Sprint > A Sprint is a short, fixed period (1‚Äì4 weeks) where a Scrum team builds and delivers a small, usable part of the product.
  
Product Backlog
   ‚îÇ
   ‚îÇ  (Prioritized list of all features & tasks)  pswd reset
   ‚ñº
Sprint Planning Meeting
   ‚îÇ
   ‚îÇ  (Team selects items & sets Sprint Goal) login signup needed first
   ‚ñº
Sprint Backlog
   ‚îÇ
   ‚îÇ  (Tasks to complete in this Sprint) login signup
   ‚ñº
Sprint (1‚Äì4 weeks)
   ‚îÇ
   ‚îÇ  (Team works on tasks ‚Üí delivers potentially shippable product) develop in 4 weeks
   ‚ñº
Sprint Review & Retrospective
   ‚îÇ
   ‚îÇ  (Feedback & improvements for next Sprint) 
   ‚ñº
Back to Product Backlog (updated)

project develop using scrum

daily stand up (daily scrum) 24H >this is like a discuss about process what we have done. or a daily inspect.

Agile principles
   Agile is based on 12 core principles from the Agile Manifesto.

1Ô∏è‚É£ Customer satisfaction is the highest priority

Deliver valuable software early and continuously to satisfy the customer.

üëâ Example: Release features in small parts instead of waiting months.

2Ô∏è‚É£ Welcome changing requirements

Even late changes are accepted if they give competitive advantage.

üëâ Agile adapts to change, not fights it.

3Ô∏è‚É£ Deliver working software frequently

Deliver software in short cycles (1‚Äì4 weeks).

üëâ Called sprints.

4Ô∏è‚É£ Business people and developers work together

Daily collaboration between stakeholders and the development team.

üëâ No communication gaps.

5Ô∏è‚É£ Build projects around motivated individuals

Give them the support, trust, and environment they need.

üëâ Don‚Äôt micromanage.

6Ô∏è‚É£ Face-to-face communication is best

Direct communication is the most effective way to share information.

üëâ In modern teams ‚Üí video calls, stand-ups.

7Ô∏è‚É£ Working software is the main measure of progress

Not documents ‚Äî real working features matter.

8Ô∏è‚É£ Maintain a sustainable pace

Teams should work at a pace they can maintain long-term.

üëâ Avoid burnout.

9Ô∏è‚É£ Continuous attention to technical excellence

Good design and clean code increase agility.

üëâ Refactoring is important.

üîü Simplicity is essential

Do only what is necessary ‚Äî avoid unnecessary work.

1Ô∏è‚É£1Ô∏è‚É£ Self-organizing teams

Best designs and solutions come from self-managed teams.

1Ô∏è‚É£2Ô∏è‚É£ Regular reflection and improvement

Teams regularly inspect and adapt their behavior.

üëâ Example: Sprint Retrospective.

now we are going to talk about devops version control system
as a practise we are going to develop a basic node.js project and we are going to manage the version control system.

firstly create a folder anywhere like CODE , again create APP after that go to cmd check versions like git,npm,node

after that create project using npm init -y
after that create a new text file
after that in folder go the icons show option and enable file name extensions. after that rename that text file to the index.js and open with notepad
   console.log('Hello Git & Node App');
   now enough.
go back to cmd and check using node index.js , project is working.

now we need to initailized the project using git init

git status, files are untracked.

git add index.js
git status.  now you can see one file tracked so we cant add like this one by one. so git has a trick using  

git add .
git status
git commit -m "Initial commit setup nodejs"

create another file , like config.json and again add that into git using git add .  , after that again git status.
git log
git log --oneline
create .env file also
npm i express
git status , so there are have useless files.
create .env file , and add node_modules and .env files to that.save
git status . 
git add .
git commit -m "create gitignore file"
git log --oneline

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
linux commands basics.......


ls
ls -lah  - file list detailed, human readable
mkdir , rmdir (if there no any permissions you need to apply sudo infront), and also if there inside something you cant directly delete the directory.. then use (sudo rm -r devops) -> directory create , delete
sudo nano devops-text.txt (file creation) /sudo rm devops-text.txt
ekaka theana file ekak thawath ehekata copy krgnna one example..

    sudo nano devops.txt > hello world > ctrl + x > y 
    ls   
    cat source.txt
    sudo cp source.txt backup.txt
    cat backup.txt ( this is using for look inside content of the file)

how to find a file location
  sudo find / -name backup.txt
And find in a specific location
  sudo find /home -name backup.txt

sudo nano backup.txt / we can also use vim backup.txt
sudo apt install vim
vim backup.txt
i , esc , :wq!

pwd - using for check current path

cat backup.txt

now we are going to learn about permision

create user > sudo adduser devuser , add fullname,roomnumber 1,phone numbers,and yes

add user to a group > sudo usermod -aG sudo devuser
how to check the group > groups devuser
switch the user > su - devuser 
go back to linuxcode

sudo apt update (only refresh)
sudo apt upgrade (Install)
processors monitoring > ps aux
                           top
                           htop

how to terminate a process.
              kill 
free -h (details about usage of memmory)
df -h (disk usage)
du -sh * (floder size)

now we are going to add services...
  sudo apt install nginx -y
  sudo systemctl start nginx
  sudo systemctl restart nginx
  sudo systemctl enable nginx
  sudo systemctl status nginx
sudo journalctl -u nginx --since "10 min ago"

now we are going to learn some networking basics..

 ip a
 ip route (chcek route table)
 ping google.com ( connect with another server)
 curl http://localhost (nginx working or not)
how to check which ports are open , we need to use nettools

sudo apt install net-tools
netstat -tulnp (we can see all ports what we are using in here)
   modern replacement for that 
         ss -tulnp

now we are going to learn about docker
 sudo apt remove docker docker-engine docker.io containerd runc
 sudo apt update 
 sudo apt upgrade -y
 sudo apt install ca-certificates curl gnupg -y
 sudo install -m 0755 -d /etc/apt/keyrings
 curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
 sudo chmod a+r /etc/apt/keyrings/docker.gpg

now we are going to add docker repository
 cd /etc
 cat os-release
 echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
 sudo apt update
apt-cache policy docker-ce  (check if docker correctly install or not)
now install docker 
   sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo systemctl start docker
sudo systemctl enable docker
sudo systemctl status docker





now we are going to talk about containerization

 Containerization is the process of packaging applications and their dependencies into lightweight containers to ensure consistency, scalability, and faster deployment across environments.


| Feature        | Container                         | Virtual Machine      |
| -------------- | ---------------------             | ----------------     |
| Runs ON        | Shares host OS + Container engine | Hypovisor + own OS   |
| Size           | Very small (MBs)                  | Very large (GBs)     |
| Startup Time   | Seconds                           | Minutes              |
| Performance    | Near-native                       | Slower               |
| Resource Usage | Low                               | High                 |
| Isolation      | Process-level                     | Full OS-level        |
| Scalability    | Very high                         | Limited              |
| Portability    | Excellent                         | Good                 |
| Cost           | Lower                             | Higher               |



Docker Architecture

Docker Hub / Docker Registory
     ^
     |pull/push
     | (Images)
     |
     v
Docker Daemon (dockered)
     ^
     |
     |repeatedly source code
     |build/run/pull/push
     |
     |
     |
     v
Docker Client


sudo docker pull nginx


1Ô∏è‚É£ Docker Client

The interface used by users

Runs Docker commands like:

docker build
docker run
docker pull
docker push


Sends requests to the Docker Daemon using REST API

Can talk to:

Local daemon

Remote daemon

üìå It does NOT run containers itself

2Ô∏è‚É£ Docker Daemon (dockerd)

The heart of Docker

Runs in the background on the host machine

Responsible for:

Building images

Running containers

Managing volumes & networks

Listens for requests from Docker Client

üìå Uses containerd and runc internally

3Ô∏è‚É£ Docker Registry

Stores Docker images

Can be:

Public ‚Üí Docker Hub

Private ‚Üí AWS ECR, GCR, ACR

Used for sharing and distributing images

Commands:

docker pull nginx
docker push myimage

How They Work Together (Flow)
Docker Client
     |
     | (REST API)
     v
Docker Daemon
     |
     |---- Local Images
     |
     |---- Docker Registry


Example:

docker run nginx

Client ‚Üí Daemon

Daemon checks local images

If not found ‚Üí pulls from Registry

Container starts

Interview-Ready One-Liner

Docker follows a client‚Äìserver architecture consisting of Docker Client, Docker Daemon, and Docker Registry.


43.53

