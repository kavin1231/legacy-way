Api (node) > frontend (React) > Deploy  > Devops

create pos system

firstly check node -v,npm -v

npm init

install dependencies

create index.js file

after that import the dependencies

initialize the app

import env

connect mogoose

backend create


check ng version for create frontend

ng new pos-system-client

ng serve

create frontend

buy servers

create aws account

create ec2

launch an instance

before connect to ec2 instance using ssh client ,I'm going to transfer pem file to windows to ubuntu using this scp C:\Users\kavin\Desktop\devops-api-key.pem linuxcode@192.xxx.x.xxx:/home/linuxcode/Desktop/DEVOPS/,

open terminal located in pem file & put this things 

chmod 400 "devops-api-key.pem"
ssh -i "devops-api-key.pem" ubuntu@ec2-xxxxxxx.compute-1.amazonaws.com

after that install nginx 
sudo apt update && sudo apt upgrade -y
sudo apt install nginx -y

after that

sudo systemctl enable nginx
sudo systemctl start nginx
sudo systemctl status nginx

after tha t in instances copy the address and put that into new tab and paste it ...still not working so 

we have to add some inbound outbound rules 
1. go to instances
2. security,security groups,edit inbound rules,then you can see only have default ssh connect rule,so we need to add new one
 *hhtp> 80 > anywhere ipv4 >server default

after that we need to create ilstic ip for ec2
  1. click ec2 > elastic ip > allocate elastic ip address > us-east-1 > Allocate click
  2. then click elastic ip > associate illastic ip address > give instance > private ip > Do not put tick for reassociation > Associate

after that you need to add new ssh connection to ubuntu and download dependencies.

  sudo apt update && sudo apt upgrade -y 
  sudo apt install nodejs
  node -v
  sudo apt install npm
  npm -v

install mongodb 24 
  curl -fsSL .....
  apt-key list
  echo ....
  sudo apt update
  sudo apt install mongodb.org
  mongod --version
  sudo systemctl enable mongod
  start / status 
  mongosh

after that add inbound rule for mongodb and system running port

1.custom tcp > 27017 > Anywhere can IPV4 > mongod server
2.custom tcp > 3000 > Anywhere can IPV4 > server port

git -v

if there is no any versions we need to install git 
after that we  can clone our github repositories in here 
     but if that is public we can without anyerrors clone,but if that was a private repository we cant directly clone.so we need to do some steps for that...
        steps
           *settings on github > developer settings > personal access tokens (classic) > generate new token > classic > token name add > exp 30 days > select scopes > repo, write:packages,delete:packages, admin:public_key,admin:repo_hook,project,admin:ssh_signing_key > generate token 
after that go to ubunntu again 
git clone https://kavin1231:ghp_KlnuFtESorixxxxxxxxxxxxxxxxxxxx@github.com/kavin1231/pos-system-devops.git

ls
cd pos-system-devops
ls
node index.js( not working )
sudo nano index.js
change mongodb url like this mongodb://localhost:27017/pos_system_devops

after that node index.js
its working


but if press ctrl + C in terminal http server not working on web

so we need to use pm2
   sudo npm install pm2 -g
   pm2 -v
   pm2 start index.js

project is online now...without terminal..



  
.......................................................................................

import an Certbot

buy a hostinger domain

search domain > buy now > 1 yr > complete payment 

go to DNS and select A name record and add ilastic ip address to points to ,and time to leave to 60  

again open terminal 

Certbot is a free tool that automatically provides and renews SSL certificates to enable HTTPS and secure your website.
after that install certbot
sudo apt install certbot python3-certbot-nginx -y

after that 
cd /etc  > cd nginx/ > ls > cd sites-available/ > ls > sudo nano default
server {
    listen 80;
    server_name devstack-devops.shop www.devstack-devops.shop;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

save and sudo nginx -t
sudo systemctl reload nginx
sudo apt install certbot python3-certbot-nginx -y

clear 
sudo certbot --nginx -d devstack-devops.shop -d www.devstack-devops.shop
give email and yes
sudo certbot renew --dry-run

sudo systemctl restart nginx and status



















